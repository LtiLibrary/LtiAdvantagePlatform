@page
@model PlatformModel
@{
    ViewData["Title"] = "Platform";
    ViewData["ActivePage"] = "Platform";
}

<h4>@ViewData["Title"]</h4>

<div class="row">
    <div class="col">
        <form method="post">
            <div asp-validation-summary="All" class="text-danger"></div>
            <input type="hidden" asp-for="Platform.PrivateKey" />
            <input type="hidden" asp-for="Platform.PublicKey" />
            <input type="hidden" asp-for="Platform.UserId" />
            <div class="form-group">
                <label asp-for="Platform.Id"></label>
                <span data-toggle="tooltip" data-placement="top" data-html="true"
                      title="The <b>@Html.DisplayNameFor(m => m.Platform.Id)</b> is the Issuer for messages that originate from the Platform such as an LtiResourceLinkRequest.">
                    <i class="fa fa-info-circle"></i>
                </span>
                <input asp-for="Platform.Id" class="form-control" readonly="readonly" />
            </div>
            <div class="form-group">
                <label asp-for="Platform.ContactEmail"></label>
                <input asp-for="Platform.ContactEmail" class="form-control">
                <span asp-validation-for="Platform.ContactEmail" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Platform.Description"></label>
                <input asp-for="Platform.Description" class="form-control">
                <span asp-validation-for="Platform.Description" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Platform.Guid"></label>
                <input asp-for="Platform.Guid" class="form-control">
                <span asp-validation-for="Platform.Guid" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Platform.Name"></label>
                <input asp-for="Platform.Name" class="form-control">
                <span asp-validation-for="Platform.Name" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Platform.ProductFamilyCode"></label>
                <input asp-for="Platform.ProductFamilyCode" class="form-control">
                <span asp-validation-for="Platform.ProductFamilyCode" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Platform.Url"></label>
                <input asp-for="Platform.Url" class="form-control">
                <span asp-validation-for="Platform.Url" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Platform.Version"></label>
                <input asp-for="Platform.Version" class="form-control">
                <span asp-validation-for="Platform.Version" class="text-danger"></span>
            </div>
            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-secondary" asp-page-handler="Save" />
            </div>
        </form>
    </div>
    <div class="col">
        <form method="post">
            <input type="hidden" asp-for="Platform.Id"/>
            <div asp-validation-summary="All" class="text-danger"></div>
            <dl>
                <dt>
                    <a class="text-body" data-toggle="collapse" href="#publickey">
                        <i class="fa fa-chevron-down"></i>
                    </a>
                    @Html.DisplayNameFor(model => model.Platform.PublicKey)
                    <span data-toggle="tooltip" data-placement="top" data-html="true"
                          title="Tools validate the JWT signature of messages sent by the platform using the <b>@Html.DisplayNameFor(m => m.Platform.PublicKey)</b>.">
                        <i class="fa fa-info-circle"></i>
                    </span>
                </dt>
                <dd>
                    <div id="publickey">
                        <pre>@Model.Platform.PublicKey</pre>
                    </div>
                </dd>
                <dt>
                    <a class="text-body" data-toggle="collapse" href="#privatekey">
                        <i class="fa fa-chevron-down"></i>
                    </a>
                    @Html.DisplayNameFor(model => model.Platform.PrivateKey)
                    <span data-toggle="tooltip" data-placement="top" data-html="true"
                          title="The Platform will sign the JWT of messages it sends using the <b>@Html.DisplayNameFor(m => m.Platform.PrivateKey)</b>.">
                        <i class="fa fa-info-circle"></i>
                    </span>
                </dt>
                <dd>
                    <div class="collapse" id="privatekey">
                        <pre>@Model.Platform.PrivateKey</pre>
                    </div>
                </dd>
            </dl>
            <button class="btn btn-danger" type="submit" asp-page-handler="RegenerateKeys">
                Regenerate Platform Keys
            </button>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}